import { useContext } from 'react';
import { useEngine } from '../../engine';
import { DrawerContext } from '../Drawer';
import './Header.scss';

const Header: React.FC = () => {
  const { expanded, toggle } = useContext(DrawerContext);

  const engine = useEngine();

  const { state } = engine;

  return (
    <header className="header">
      <h1>Numbus</h1>
      <button
        className="menu-button"
        aria-label="Menu"
        aria-pressed={expanded || undefined}
        onClick={toggle}
      >
        <svg viewBox="-12 -12 24 24">
          <g>
            <circle cx={0} cy={0} r={4} />
            <circle cx={0} cy={0} r={4} />
            <circle cx={0} cy={0} r={4} />
          </g>
        </svg>
      </button>
      {state !== null && (
        <div className="header__buttons">
          <button aria-label="Undo" disabled={!state.previous} onClick={engine.undo}>
            <svg viewBox="0 0 24 24">
              <path d="M2.474 10.339a6.859 6.859 0 0 1-.105.154c-.244.436-.373.971-.369 1.518a2.96 2.96 0 0 0 .341 1.418c.15.259.311.507.483.739 1.67 2.16 3.582 3.945 5.666 5.288.419.264.864.448 1.32.544h.057c.666-.008 1.274-.519 1.576-1.323.15-.576.264-1.168.341-1.769.029-.304.054-.608.077-.913.046.004.092.005.139.005a9.965 9.965 0 0 1 6.801 2.669c1.15 1.067 3.199.9 3.199-.669 0-5.523-4.477-10-10-10l-.141.001a43.06 43.06 0 0 0-.102-1.085c-.066-.48-.152-.956-.257-1.424-.16-.508-.44-.93-.795-1.2A1.567 1.567 0 0 0 9.81 4a3.82 3.82 0 0 0-1.179.448c-2.133 1.35-4.09 3.163-5.793 5.364-.132.18-.27.386-.364.527Z" />
            </svg>
          </button>
          <button aria-label="Redo" disabled={!state.next} onClick={engine.redo}>
            <svg viewBox="0 0 24 24">
              <path d="M21.526 10.339c.049.072.086.128.105.154.244.436.373.971.369 1.518a2.96 2.96 0 0 1-.341 1.418 7.75 7.75 0 0 1-.483.739c-1.67 2.16-3.582 3.945-5.666 5.288a4.041 4.041 0 0 1-1.32.544h-.057c-.666-.008-1.274-.519-1.576-1.323a14.204 14.204 0 0 1-.341-1.769 49.507 49.507 0 0 1-.077-.913A2.073 2.073 0 0 1 12 16a9.965 9.965 0 0 0-6.801 2.669C4.049 19.736 2 19.569 2 18 2 12.477 6.477 8 12 8l.141.001c.03-.362.064-.724.102-1.085.066-.48.152-.956.257-1.424.16-.508.44-.93.795-1.2.277-.192.584-.292.895-.292.405.079.802.23 1.179.448 2.133 1.35 4.09 3.163 5.793 5.364.132.18.27.386.364.527Z" />
            </svg>
          </button>
          <button aria-label="Hint" disabled={state.solved} onClick={engine.hint}>
            <svg viewBox="0 0 24 24">
              <path d="M15.622 16a.5.5 0 0 1 .481.579.487.487 0 0 1-.48.421H8.377a.487.487 0 0 1-.48-.421.5.5 0 0 1 .482-.579h7.244ZM15.794 15c.42 0 .785-.267.978-.64.148-.284.32-.547.519-.776a7 7 0 1 0-10.581 0c.198.23.37.492.518.777.193.372.559.639.978.639h7.588ZM8.567 19c-.26 0-.49-.17-.526-.427-.045-.311.214-.573.528-.573h6.862c.314 0 .573.262.528.573-.037.257-.267.427-.526.427H8.567ZM10.269 20c-.77 0-1.203.826-.573 1.27.651.46 1.446.73 2.304.73.858 0 1.653-.27 2.304-.73.63-.444.197-1.27-.573-1.27H10.27Z" />
              <path d="M11.342 9.54c-.271.398-.464.84-.497 1.248-.022.277.027.598.253.854.23.26.562.358.902.358.34 0 .671-.098.902-.358.226-.256.275-.577.253-.854-.033-.408-.226-.85-.497-1.249.274-.246.579-.43.876-.509.37-.098.746-.042 1.112.324.297.297.359.801.13 1.488-.223.668-.678 1.353-1.13 1.804a.5.5 0 0 0 .707.708c.549-.549 1.094-1.364 1.371-2.196.271-.813.332-1.809-.37-2.512-.634-.634-1.383-.766-2.076-.582-.478.126-.915.397-1.278.722-.363-.325-.8-.596-1.278-.722-.692-.184-1.442-.051-2.076.582-.703.703-.641 1.699-.37 2.512.277.832.822 1.647 1.37 2.196a.5.5 0 0 0 .708-.707c-.452-.452-.907-1.137-1.13-1.805-.229-.687-.167-1.191.13-1.488.366-.366.742-.422 1.112-.324.297.079.602.263.876.51Zm.658.846a1.381 1.381 0 0 0-.158.482.29.29 0 0 0 .006.11A.37.37 0 0 0 12 11a.37.37 0 0 0 .152-.022.29.29 0 0 0 .006-.11 1.381 1.381 0 0 0-.158-.482Zm.149.6v-.002Zm.008-.011.003-.002-.003.002Zm-.317-.002.003.002-.003-.002Zm.01.01.002.002Z" />
            </svg>
          </button>
        </div>
      )}
    </header>
  );
};

export default Header;
